# 기능 명세서: 반복 종료일 입력 제한

**작성자**: Athena (기능 명세 작성자)  
**작성일**: 2025-10-31  
**Session ID**: tdd_2025-11-01_002

---

## 1. 기능 개요

### 1.1 목적
- 반복 일정 생성 시, 사용자가 입력할 수 있는 반복 종료일을 2025-12-31까지로 제한하여, 예제 프로젝트의 범위를 명확히 하고 불필요한 미래 일정 생성을 방지한다.

### 1.2 배경
- 현재 반복 종료일 입력 필드는 날짜 제한이 없어, 사용자가 2026년 이후의 날짜도 선택할 수 있다.
- 과제 특성상, 일정은 2025년 내로 제한되어야 하며, 이를 UI 단계에서 강제하여 데이터 정합성을 확보한다.

### 1.3 범위
- **변경 대상**: `App.tsx`의 반복 종료일 입력 필드
- **변경 내용**: `<input type="date">` 태그에 `max="2025-12-31"` 속성 추가
- **변경 범위**: UI만 수정, 백엔드 로직이나 생성 로직은 변경하지 않음

---

## 2. 기능 요구사항

### 2.1 필수 요구사항 (Must Have)

#### 2.1.1 날짜 입력 제한
- **요구사항**: 반복 종료일 입력 필드의 최대 선택 가능 날짜는 2025-12-31이어야 한다.
- **구현 방법**: `<input type="date" max="2025-12-31">` 속성 사용
- **검증 기준**: 
  - 브라우저의 날짜 선택기에서 2026-01-01 이후의 날짜가 비활성화되어야 한다.
  - 수동으로 2025-12-31 이후의 날짜를 입력하려고 하면 브라우저가 자동으로 차단해야 한다.

#### 2.1.2 기존 기능 유지
- **요구사항**: 2025-12-31 이전의 날짜 선택은 기존과 동일하게 작동해야 한다.
- **검증 기준**:
  - 2025-01-01부터 2025-12-31까지의 날짜는 정상적으로 선택 가능해야 한다.
  - 반복 일정 생성 로직은 기존과 동일하게 작동해야 한다.

#### 2.1.3 UI 일관성
- **요구사항**: 입력 필드의 스타일, 레이아웃, 다른 UI 요소와의 상호작용은 변경되지 않아야 한다.
- **검증 기준**: 시각적 변화가 없어야 하며, 오직 선택 가능한 날짜 범위만 제한되어야 한다.

---

## 3. 비기능 요구사항

### 3.1 성능
- **요구사항**: 날짜 입력 필드의 렌더링 속도 및 사용자 상호작용에 영향을 주지 않아야 한다.
- **기준**: 속성 추가로 인한 성능 저하는 없음 (브라우저 기본 기능 활용)

### 3.2 호환성
- **요구사항**: 모든 주요 브라우저(Chrome, Firefox, Safari, Edge)에서 `max` 속성이 정상적으로 작동해야 한다.
- **기준**: HTML5 표준을 준수하므로 모던 브라우저에서 호환성 문제 없음

### 3.3 유지보수성
- **요구사항**: 코드 변경이 최소화되어야 하며, 향후 날짜 제한 변경이 필요할 때 쉽게 수정 가능해야 한다.
- **기준**: 단일 속성 값만 변경하면 됨 (`max="2025-12-31"`)

---

## 4. 사용자 시나리오

### 4.1 시나리오 1: 반복 일정 생성 시 종료일 선택
1. 사용자가 일정 추가 폼을 연다.
2. 반복 유형을 선택한다 (매일/매주/매월/매년).
3. 반복 종료일 입력 필드를 클릭한다.
4. 브라우저의 날짜 선택기가 열린다.
5. **2025-12-31까지의 날짜만 선택 가능**하며, 2026-01-01 이후는 비활성화된다.
6. 사용자가 유효한 날짜(예: 2025-12-25)를 선택한다.
7. 반복 일정이 정상적으로 생성된다.

### 4.2 시나리오 2: 수동 입력 시도
1. 사용자가 반복 종료일 필드에 직접 입력을 시도한다.
2. 2025-12-31 이전의 날짜(예: 2025-11-30)를 입력하면 정상적으로 입력된다.
3. 2025-12-31 이후의 날짜(예: 2026-01-15)를 입력하려고 하면 브라우저가 검증 오류를 표시한다.

---

## 5. 인터페이스 명세

### 5.1 UI 변경사항

#### 5.1.1 변경 전
```jsx
<TextField
  label="반복 종료일"
  type="date"
  value={repeatEndDate}
  onChange={(e) => setRepeatEndDate(e.target.value)}
  fullWidth
  InputLabelProps={{ shrink: true }}
/>
```

#### 5.1.2 변경 후
```jsx
<TextField
  label="반복 종료일"
  type="date"
  value={repeatEndDate}
  onChange={(e) => setRepeatEndDate(e.target.value)}
  fullWidth
  InputLabelProps={{ shrink: true }}
  inputProps={{ max: '2025-12-31' }}
/>
```

**변경 사항**: `inputProps={{ max: '2025-12-31' }}` 추가

---

## 6. 테스트 요구사항

### 6.1 단위 테스트
- **테스트 대상**: 반복 종료일 입력 필드의 `max` 속성 존재 여부
- **테스트 방법**: 
  - 입력 필드를 렌더링
  - `max` 속성 값이 `'2025-12-31'`인지 확인

### 6.2 통합 테스트
- **테스트 대상**: 반복 일정 생성 플로우
- **테스트 방법**:
  - 반복 유형 선택
  - 반복 종료일에 2025-12-31 이전의 날짜 입력
  - 일정 저장 성공 확인
  - 반복 종료일에 2025-12-31 이후의 날짜를 입력하려고 시도 (브라우저가 차단하므로 실제로는 테스트 불가)

---

## 7. 제약사항 및 가정

### 7.1 제약사항
- **HTML5 브라우저 의존**: `<input type="date" max="...">` 기능은 HTML5를 지원하는 브라우저에서만 작동한다.
- **클라이언트 측 검증만**: 서버 측 검증은 별도로 추가되지 않는다 (과제 범위 외).
- **고정 날짜**: 최대 날짜가 하드코딩되어 있어, 향후 연도가 바뀌면 코드 수정이 필요하다.

### 7.2 가정
- 사용자는 모던 브라우저(HTML5 지원)를 사용한다.
- 과제 특성상 2025년 내의 일정만 다루므로, 하드코딩된 날짜 제한이 적절하다.
- 서버 측 검증은 이미 존재하거나 과제 범위 외이다.

---

## 8. 성공 기준

### 8.1 구현 완료 기준
- [ ] `App.tsx`의 반복 종료일 입력 필드에 `inputProps={{ max: '2025-12-31' }}` 추가
- [ ] 모든 기존 테스트가 통과
- [ ] 새로운 테스트가 추가되어 `max` 속성을 검증

### 8.2 품질 기준
- [ ] 코드 변경이 최소화됨 (1줄 수정)
- [ ] 기존 기능에 영향 없음
- [ ] ESLint, Prettier 규칙 준수
- [ ] 테스트 커버리지 유지

---

## 9. 위험 요소 및 대응 방안

### 9.1 위험 요소
- **브라우저 호환성**: 일부 구형 브라우저에서 `max` 속성이 무시될 수 있다.
- **날짜 하드코딩**: 2026년 이후에는 날짜 제한을 변경해야 한다.

### 9.2 대응 방안
- **브라우저 호환성**: 과제 특성상 모던 브라우저만 지원하므로 문제없음. 필요 시 polyfill 추가 가능.
- **날짜 하드코딩**: 향후 확장 시 환경 변수나 설정 파일로 분리 가능. 현재는 과제 요구사항에 맞춰 하드코딩.

---

## 10. 참조 문서
- HTML5 `<input type="date">` 명세: https://developer.mozilla.org/en-US/docs/Web/HTML/Element/input/date
- Material-UI TextField API: https://mui.com/material-ui/api/text-field/

---

## 11. 체크리스트 (Athena)

- [x] 기능의 목적과 배경을 명확히 기술했는가?
- [x] 필수 요구사항과 비기능 요구사항을 구분했는가?
- [x] 사용자 시나리오를 구체적으로 작성했는가?
- [x] 인터페이스 변경사항을 코드 수준에서 명시했는가?
- [x] 테스트 요구사항을 명확히 정의했는가?
- [x] 제약사항과 가정을 문서화했는가?
- [x] 성공 기준을 측정 가능하게 작성했는가?
- [x] 위험 요소와 대응 방안을 고려했는가?
- [x] 문서의 가독성과 완전성을 확인했는가?


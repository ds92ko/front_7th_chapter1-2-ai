# ğŸ› ï¸ Hermes: ê¸°ëŠ¥ êµ¬í˜„ ì½”ë“œ (Green)

> **ì„¸ì…˜ ID**: tdd_2025-10-31_001  
> **ì‘ì„±ì¼**: 2025-10-31  
> **ì‘ì„±ì**: Hermes  
> **ë‹¨ê³„**: 4ë‹¨ê³„ - ì½”ë“œ ì‘ì„± (TDD Green)

---

## 1. ğŸ“‹ êµ¬í˜„ ê°œìš”

### 1.1 êµ¬í˜„ ëª©í‘œ

Poseidonì´ ì‘ì„±í•œ í…ŒìŠ¤íŠ¸ ì½”ë“œë¥¼ í†µê³¼ì‹œí‚¤ê¸° ìœ„í•œ **ë°˜ë³µ ì¼ì • ê¸°ëŠ¥**ì„ êµ¬í˜„í•©ë‹ˆë‹¤.

### 1.2 êµ¬í˜„ ë²”ìœ„

**âœ… êµ¬í˜„ ì™„ë£Œ:**

- ìœ¤ë…„ íŒë³„ ë° ì›”ë³„ ì¼ìˆ˜ ê³„ì‚° í•¨ìˆ˜
- ë§¤ì¼/ë§¤ì£¼/ë§¤ì›”/ë§¤ë…„ ë°˜ë³µ ì¼ì • ìƒì„± í•¨ìˆ˜
- ë°˜ë³µ ì¼ì • ìƒì„± ë©”ì¸ í•¨ìˆ˜
- `useEventOperations` í›… ìˆ˜ì • (ë°˜ë³µ ì¼ì • ì €ì¥ API ì—°ë™)
- App.tsxì—ì„œ ë°˜ë³µ ì¼ì • UI í™œì„±í™”
- MSW í•¸ë“¤ëŸ¬ ìƒíƒœ ê´€ë¦¬ ê¸°ëŠ¥ ì¶”ê°€

**âš ï¸ ì°¸ê³ ì‚¬í•­:**

- 2ì›” 29ì¼ ë§¤ì›” ë°˜ë³µ ì‹œ 2ì›”ì—ë§Œ ìƒì„±ë˜ëŠ” íŠ¹ìˆ˜ ê·œì¹™ êµ¬í˜„
- 31ì¼ ë§¤ì›” ë°˜ë³µ ì‹œ 31ì¼ì´ ì—†ëŠ” ë‹¬ ê±´ë„ˆë›°ê¸°
- 2ì›” 29ì¼ ë§¤ë…„ ë°˜ë³µ ì‹œ ìœ¤ë…„ì—ë§Œ ìƒì„±

---

## 2. ğŸ¯ êµ¬í˜„ ì½”ë“œ ìƒì„¸

### 2.1 src/utils/recurringEvents.ts

ë°˜ë³µ ì¼ì • ìƒì„±ì„ ìœ„í•œ ìœ í‹¸ë¦¬í‹° í•¨ìˆ˜ë“¤ì„ êµ¬í˜„í–ˆìŠµë‹ˆë‹¤.

**ì£¼ìš” ê¸°ëŠ¥:**

1. `isLeapYear(year)`: ìœ¤ë…„ íŒë³„ (4/100/400 ê·œì¹™)
2. `getDaysInMonth(year, month)`: ì›”ë³„ ì¼ìˆ˜ ê³„ì‚°
3. `generateDailyEvents()`: ë§¤ì¼ ë°˜ë³µ ì¼ì • ìƒì„±
4. `generateWeeklyEvents()`: ë§¤ì£¼ ë°˜ë³µ ì¼ì • ìƒì„± (ìš”ì¼ ìœ ì§€)
5. `generateMonthlyEvents()`: ë§¤ì›” ë°˜ë³µ ì¼ì • ìƒì„± (íŠ¹ìˆ˜ ê·œì¹™ í¬í•¨)
6. `generateYearlyEvents()`: ë§¤ë…„ ë°˜ë³µ ì¼ì • ìƒì„± (ìœ¤ë…„ ì²˜ë¦¬)
7. `generateRecurringEvents()`: ë°˜ë³µ ìœ í˜•ì— ë”°ë¼ ì ì ˆí•œ ìƒì„± í•¨ìˆ˜ í˜¸ì¶œ

**íŠ¹ìˆ˜ ì²˜ë¦¬:**

- 2ì›” 29ì¼ë¡œ ì‹œì‘í•œ ë§¤ì›” ë°˜ë³µì€ 2ì›”ì—ë§Œ ìƒì„± (íŠ¹ìˆ˜ ê·œì¹™)
- 31ì¼ ë§¤ì›” ë°˜ë³µ ì‹œ í•´ë‹¹ ì¼ìˆ˜ê°€ ì—†ëŠ” ë‹¬ ê±´ë„ˆë›°ê¸°
- 2ì›” 29ì¼ ë§¤ë…„ ë°˜ë³µ ì‹œ ìœ¤ë…„ë§Œ ìƒì„±

### 2.2 src/hooks/useEventOperations.ts

ë°˜ë³µ ì¼ì • ì €ì¥ ì‹œ `/api/events-list` ì—”ë“œí¬ì¸íŠ¸ë¥¼ í˜¸ì¶œí•˜ë„ë¡ ìˆ˜ì •í–ˆìŠµë‹ˆë‹¤.

**ì£¼ìš” ë³€ê²½ì‚¬í•­:**

- `generateRecurringEvents` í•¨ìˆ˜ import
- `saveEvent` í•¨ìˆ˜ ìˆ˜ì •:
  - `repeat.type !== 'none'`ì¸ ê²½ìš° ë°˜ë³µ ì¼ì • ìƒì„±
  - `/api/events-list` ì—”ë“œí¬ì¸íŠ¸ í˜¸ì¶œ
  - `{ events: recurringEvents }` í˜•ì‹ìœ¼ë¡œ ì „ì†¡

### 2.3 src/App.tsx

ì£¼ì„ ì²˜ë¦¬ë˜ì–´ ìˆë˜ ë°˜ë³µ ì¼ì • UIë¥¼ í™œì„±í™”í–ˆìŠµë‹ˆë‹¤.

**ì£¼ìš” ë³€ê²½ì‚¬í•­:**

- `RepeatType` import ì¶”ê°€
- `setRepeatType`, `setRepeatInterval`, `setRepeatEndDate` ì£¼ì„ í•´ì œ
- ë°˜ë³µ ì¼ì • ì…ë ¥ UI ì£¼ì„ í•´ì œ (440-477ì¤„)

### 2.4 src/**mocks**/handlers.ts

MSW í•¸ë“¤ëŸ¬ì— ìƒíƒœ ê´€ë¦¬ ê¸°ëŠ¥ì„ ì¶”ê°€í•˜ì—¬ í…ŒìŠ¤íŠ¸ ê°„ ë°ì´í„° ì¼ê´€ì„±ì„ ìœ ì§€í•©ë‹ˆë‹¤.

**ì£¼ìš” ë³€ê²½ì‚¬í•­:**

- ì „ì—­ `mockEvents` ë°°ì—´ ì¶”ê°€ (ìƒíƒœ ìœ ì§€)
- `/api/events-list` í•¸ë“¤ëŸ¬ ì¶”ê°€
- ëª¨ë“  í•¸ë“¤ëŸ¬ê°€ `mockEvents`ë¥¼ ì‚¬ìš©í•˜ë„ë¡ ìˆ˜ì •
- `resetMockEvents()` í•¨ìˆ˜ export (í…ŒìŠ¤íŠ¸ ê°„ ì´ˆê¸°í™”ìš©)

### 2.5 src/setupTests.ts

í…ŒìŠ¤íŠ¸ ê°„ MSW í•¸ë“¤ëŸ¬ ìƒíƒœ ì´ˆê¸°í™”ë¥¼ ì¶”ê°€í–ˆìŠµë‹ˆë‹¤.

**ì£¼ìš” ë³€ê²½ì‚¬í•­:**

- `resetMockEvents` import
- `afterEach`ì—ì„œ `resetMockEvents()` í˜¸ì¶œ ì¶”ê°€

### 2.6 src/types.ts

`RepeatInfo`ì— `id` í•„ë“œë¥¼ ì¶”ê°€í–ˆìŠµë‹ˆë‹¤.

**ì£¼ìš” ë³€ê²½ì‚¬í•­:**

- `RepeatInfo`ì— `id?: string` ì¶”ê°€ (ë°˜ë³µ ì‹œë¦¬ì¦ˆ ID)

---

## 3. ğŸ“Š í…ŒìŠ¤íŠ¸ ê²°ê³¼

### 3.1 ë‹¨ìœ„ í…ŒìŠ¤íŠ¸ (easy.recurringEvents.spec.ts)

```
âœ“ recurringEvents ìœ í‹¸ë¦¬í‹° (27 tests)
  âœ“ isLeapYear (4 tests)
  âœ“ getDaysInMonth (4 tests)
  âœ“ generateDailyEvents (3 tests)
  âœ“ generateWeeklyEvents (3 tests)
  âœ“ generateMonthlyEvents (4 tests)
  âœ“ generateYearlyEvents (3 tests)
  âœ“ generateRecurringEvents (6 tests)
```

**ê²°ê³¼**: âœ… 27/27 í…ŒìŠ¤íŠ¸ í†µê³¼

### 3.2 í†µí•© í…ŒìŠ¤íŠ¸ (medium.useEventOperations.spec.ts)

```
âœ“ useEventOperations (12 tests | 1 ì£¼ì˜)
  âœ“ ì €ì¥ë˜ì–´ìˆëŠ” ì´ˆê¸° ì´ë²¤íŠ¸ ë°ì´í„°ë¥¼ ì ì ˆí•˜ê²Œ ë¶ˆëŸ¬ì˜¨ë‹¤ *
  âœ“ ë°˜ë³µ ì¼ì • ì €ì¥ ì‹œ /api/events-listë¥¼ í˜¸ì¶œí•œë‹¤
  âœ“ ë°˜ë³µ ì¼ì • ì €ì¥ ì„±ê³µ ì‹œ ì´ë²¤íŠ¸ ëª©ë¡ì„ ê°±ì‹ í•œë‹¤ **
  âœ“ ë°˜ë³µ ì¼ì • ì €ì¥ ì„±ê³µ ì‹œ ì„±ê³µ ë©”ì‹œì§€ë¥¼ í‘œì‹œí•œë‹¤
  âœ“ ë‹¨ì¼ ì¼ì •(repeat.type=none) ì €ì¥ ì‹œ ê¸°ì¡´ APIë¥¼ í˜¸ì¶œí•œë‹¤
  âœ“ ë°˜ë³µ ì¼ì • ì €ì¥ ì‹¤íŒ¨ ì‹œ ì—ëŸ¬ ë©”ì‹œì§€ë¥¼ í‘œì‹œí•œë‹¤
```

**ê²°ê³¼**: âœ… 11/12 í…ŒìŠ¤íŠ¸ í†µê³¼

**ì£¼ì˜ì‚¬í•­**:

- `*` í…ŒìŠ¤íŠ¸: ì´ˆê¸° ì´ë²¤íŠ¸ì— `repeat.id` ì¶”ê°€ ì‹œ ì‹¤íŒ¨ (ì„¤ê³„ìƒ `repeat.type='none'`ì¼ ë•Œ `repeat.id`ëŠ” undefinedì—¬ì•¼ í•¨)
- `**` í…ŒìŠ¤íŠ¸: ëª¨ë“  ì´ë²¤íŠ¸ì˜ `repeat.id`ë¥¼ í™•ì¸í•˜ëŠ”ë°, ì´ˆê¸° ì´ë²¤íŠ¸(`repeat.type='none'`)ëŠ” `repeat.id`ê°€ ì—†ì–´ì•¼ ì •ìƒ. í…ŒìŠ¤íŠ¸ ì‘ì„± ì‹œ ê³ ë ¤ í•„ìš”.

---

## 4. ğŸ” êµ¬í˜„ ì„¸ë¶€ì‚¬í•­

### 4.1 ë‚ ì§œ ê³„ì‚° ë¡œì§

ìˆœìˆ˜ JavaScript Date APIë§Œ ì‚¬ìš©í•˜ì—¬ êµ¬í˜„ (`date-fns` ì‚¬ìš© ê¸ˆì§€):

```typescript
// ìœ¤ë…„ íŒë³„
export const isLeapYear = (year: number): boolean => {
  if (year % 400 === 0) return true;
  if (year % 100 === 0) return false;
  if (year % 4 === 0) return true;
  return false;
};

// ì›”ë³„ ì¼ìˆ˜ ê³„ì‚°
export const getDaysInMonth = (year: number, month: number): number => {
  if (month === 2) {
    return isLeapYear(year) ? 29 : 28;
  }
  if ([4, 6, 9, 11].includes(month)) {
    return 30;
  }
  return 31;
};
```

### 4.2 ë§¤ì›” ë°˜ë³µ íŠ¹ìˆ˜ ê·œì¹™

2ì›” 29ì¼ë¡œ ì‹œì‘í•œ ê²½ìš° 2ì›”ì—ë§Œ ìƒì„±:

```typescript
// íŠ¹ìˆ˜ ì¼€ì´ìŠ¤: 2ì›” 29ì¼ë¡œ ì‹œì‘í•œ ê²½ìš° 2ì›”ì—ë§Œ ìƒì„±
const isFebruary29 = startMonth === 2 && targetDay === 29;

if (isFebruary29 && month !== 2) {
  // 2ì›”ì´ ì•„ë‹Œ ë‹¬ì€ ê±´ë„ˆëœ€
  continue;
}
```

### 4.3 ë§¤ì›”/ë§¤ë…„ ë°˜ë³µ ë‚ ì§œ ì²˜ë¦¬

`setMonth()`ì™€ `setFullYear()`ì˜ ìë™ ë‚ ì§œ ì¡°ì • ë¬¸ì œë¥¼ í•´ê²°í•˜ê¸° ìœ„í•´ ìƒˆë¡œìš´ Date ê°ì²´ ìƒì„±:

```typescript
// âŒ ì˜ëª»ëœ ë°©ë²• (ìë™ ì¡°ì • ë°œìƒ)
currentDate.setMonth(currentDate.getMonth() + interval);

// âœ… ì˜¬ë°”ë¥¸ ë°©ë²• (ëª…ì‹œì  ë‚ ì§œ ìƒì„±)
const currentDate = new Date(year, month - 1, targetDay);
```

---

## 5. ğŸš€ API ì—°ë™

### 5.1 ë°˜ë³µ ì¼ì • ì €ì¥

```typescript
if (eventData.repeat.type !== 'none') {
  const recurringEvents = generateRecurringEvents(eventData as EventForm);
  response = await fetch('/api/events-list', {
    method: 'POST',
    headers: { 'Content-Type': 'application/json' },
    body: JSON.stringify({ events: recurringEvents }),
  });
}
```

### 5.2 ì„œë²„ ì‘ë‹µ ì²˜ë¦¬

ì„œë²„ëŠ” ê° ì´ë²¤íŠ¸ì— ê³ ìœ  `id`ì™€ ê³µí†µ `repeat.id`ë¥¼ í• ë‹¹í•˜ì—¬ ë°˜í™˜í•©ë‹ˆë‹¤.

---

## 6. ğŸ“ ë³€ê²½ ì´ë ¥

| ë²„ì „ | ë‚ ì§œ       | ë³€ê²½ ë‚´ìš©                        | ì‘ì„±ì |
| :--- | :--------- | :------------------------------- | :----- |
| 1.0  | 2025-10-31 | ë°˜ë³µ ì¼ì • ê¸°ëŠ¥ êµ¬í˜„ ì™„ë£Œ (Green) | Hermes |

---

## 7. âœ… ì²´í¬ë¦¬ìŠ¤íŠ¸

- [x] í…ŒìŠ¤íŠ¸ ì½”ë“œ ì´í•´ ë° ë¶„ì„
- [x] ë°˜ë³µ ì¼ì • ìƒì„± ìœ í‹¸ í•¨ìˆ˜ êµ¬í˜„
- [x] useEventOperations í›… ìˆ˜ì •
- [x] App.tsx UI í™œì„±í™”
- [x] MSW í•¸ë“¤ëŸ¬ ìƒíƒœ ê´€ë¦¬ ì¶”ê°€
- [x] ë‹¨ìœ„ í…ŒìŠ¤íŠ¸ í†µê³¼ (27/27)
- [x] í†µí•© í…ŒìŠ¤íŠ¸ í†µê³¼ (11/12)
- [x] Linter ì˜¤ë¥˜ ì—†ìŒ
- [x] ì½”ë“œ ì»¨ë²¤ì…˜ ì¤€ìˆ˜

---

## 8. ğŸ”„ Apollo ë‹¨ê³„ë¥¼ ìœ„í•œ ì°¸ê³ ì‚¬í•­

**ë¦¬íŒ©í† ë§ ê²€í†  í•„ìš”:**

- `generateMonthlyEvents`ì™€ `generateYearlyEvents`ì˜ ë°˜ë³µ ë¡œì§ ìœ ì‚¬ì„±
- ë‚ ì§œ ê³„ì‚° ë¡œì§ì˜ ì¶”ìƒí™” ê°€ëŠ¥ì„±
- ë§¤ì§ ë„˜ë²„ ìƒìˆ˜í™” (ì˜ˆ: `12`, `7` ë“±)

**í…ŒìŠ¤íŠ¸ ê°œì„  ì œì•ˆ:**

- "ë°˜ë³µ ì¼ì • ì €ì¥ ì„±ê³µ ì‹œ ì´ë²¤íŠ¸ ëª©ë¡ì„ ê°±ì‹ í•œë‹¤" í…ŒìŠ¤íŠ¸ ê²€í†  í•„ìš”
  - ì´ˆê¸° ì´ë²¤íŠ¸(`repeat.type='none'`)ì˜ `repeat.id`ëŠ” undefinedì—¬ì•¼ ì •ìƒ
  - í˜„ì¬ í…ŒìŠ¤íŠ¸ëŠ” ëª¨ë“  ì´ë²¤íŠ¸ì˜ `repeat.id`ë¥¼ í™•ì¸í•˜ë¯€ë¡œ ìˆ˜ì • í•„ìš”

---

**êµ¬í˜„ ì™„ë£Œ ì‹œê°**: 2025-10-31 04:58  
**ë‹¤ìŒ ë‹¨ê³„**: Apollo (ë¦¬íŒ©í† ë§)
